<!DOCTYPE html>
<html>
<head>
	<title>Decision Tree example</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="js/jquery-1.1.2.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<link href="css/bootstrap.min.css" rel="stylesheet" />
	<link href="css/animation.css" rel="stylesheet" />
	<script type="text/javascript">
	var button;
	jQuery(document).ready(function($) {


		/**
		 *  Scroll down to the function at the bottom  of this code block to see the arguments 
		 *  you're allowed to pass in, as well as which datatypes they should be.
		 *
		 *  Next, add your code to the inside of the click function just below this block. The two
		 *  variables theirPick and buttonId stores their choices. Run the fuction createNewQuestion
		 *  to create a new button.
		 */


		//create the first button
		
		var q1 = {question:"Test PSU", onPass:"q2", onFail:"q3"};
		var q2 = {question:"Remove CPU1", onPass:"q4", onFail:"q5"};
		var q3 = {question:"Replace PSU", onPass:"end", onFail:"end"};
		var q4 = {question:"Replace CPU1", onPass:"end", onFail:"end"};

		createNewQuestion(q1.question, ['Pass', 'Fail'], 'q1');

		function onclick(){
			$('.form-group button').on('click', function(e){

				//the text of their pick
				var theirPick = $(this).html(); 
				//an id to know which question it's for
				var buttonId = $(this).parent().data('id');

				// Debug crap
				//console.log(buttonId + ' ' + eval(buttonId).onPass)
				$('.jumbotron').append(theirPick);
				/******* YOUR CODE GOES BELOW HERE ************/
				
				if (theirPick == 'Pass'){
					// Use buttonId to find next question
					var next = eval(buttonId).onPass;
					createNewQuestion(eval(next).question, ['Pass', 'Fail'], next);
				}else{
					// Use buttonId to find next question
					var next = eval(buttonId).onFail;
					createNewQuestion(eval(next).question, ['Pass', 'Fail'], next);
				}

				/******* YOUR CODE GOES ABOVE HERE **********/

			});
		}


		/*
		 * Function Name: createNewQuestion
		 * Erases previous question, then create a brand new question.
		 *
		 * @param {string} question - This is the text of the question
		 * @param {array} options - This is an array of strings for all of the different options the user has to answer
		 * @param {string} buttonid - An identifier for the current question
		 */

		function createNewQuestion(question, options, buttonId){
			//erase previous question
			$('.row').eq(0).html('');

			//check to see if all arguments are submitted
			var question = typeof arguments[0] === "undefined" ? "" : question;
			var options  = typeof arguments[1] === "undefined" ? [] : options;
			var buttonId = typeof arguments[2] === "undefined" ? "" : buttonId;
console.log(eval(buttonId).onFail)
			//create a new question
			button = $('<div />')
			.addClass('panel panel-default col-md-8 col-md-offset-2')
			.append(
				$('<form />')
					.addClass('form')
					.attr('role', 'form')
					.append('<h3>' + question + '</h3>')
					.append($('<div />')
						.data('id', buttonId)
						.addClass('form-group')
						.append(
							function(){
								var string = '';
								$.each(options, function(inx, objval){
									string += '<button type="button" class="btn btn-default">' + objval + '</button>&nbsp;';
								});
								return (eval(buttonId).onPass == 'end') ? '' : string;
							}
						)
					)
			).appendTo($('.row').eq(0));
			
			onclick();
		}

	});
	</script>
	<style>
		.panel{
			padding-left:10px;
			padding-right:10px;
		}
	</style>
</head>
<body>
	<div class="container">
		<div class="jumbotron">
			<h1>Decision Tree</h1>
			<p>This is a decision tree which is in now way related to the fire project</p>
		</div>


		<div class="row">


		<!--  What the HTML looks like (it's generated by jQuery automatically)
		<div class="panel panel-default col-md-8 col-md-offset-2" id="questioncontainer">
			
			<form class="form" role="form">
				
				
				<h3 id="question">Do you like cats?</h3>

				<div class="form-group">
					<button type="button" class="btn btn-default" id="yesbutton">Yes</button>
					<button type="button" class="btn btn-default" id="nobutton">No</button>
				</div>
			</form>

		</div>
		-->

	</div>
</body>
</html>